{"ast":null,"code":"import _classCallCheck from \"/Users/Matilda/Documents/GitHub/calendar-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Matilda/Documents/GitHub/calendar-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Matilda/Documents/GitHub/calendar-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Matilda/Documents/GitHub/calendar-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Matilda/Documents/GitHub/calendar-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Matilda/Documents/GitHub/calendar-react/src/Sidebar.js\";\nimport React, { Component } from \"react\";\nimport AES from 'crypto-js/aes';\nimport enc from 'crypto-js/enc-utf8';\nimport Fetcher from \"./fetchfuncs\";\n\nvar Sidebar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Sidebar, _Component);\n\n  function Sidebar(props) {\n    var _this;\n\n    _classCallCheck(this, Sidebar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Sidebar).call(this, props));\n    _this.state = {\n      status: \"LOADING\",\n      events: \"\"\n    };\n    _this.fetcher = new Fetcher();\n    return _this;\n  }\n\n  _createClass(Sidebar, [{\n    key: \"processResponse\",\n    value: function processResponse(response) {\n      return JSON.parse(AES.decrypt(response, 'teamengine-key').toString(enc));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // when data is retrieved we update the state\n      // this will cause the component to re-render\n      this.fetcher.events.then(function (events) {\n        events = _this2.processResponse(events).events;\n\n        _this2.setState({\n          status: \"LOADED\",\n          events: events\n        });\n      }).catch(function () {\n        _this2.setState({\n          status: \"ERROR\"\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // depending on the state we either generate\n      // useful message to the user or show the list\n      var events = null;\n\n      switch (this.state.status) {\n        case \"LOADING\":\n          events = React.createElement(\"em\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 45\n            },\n            __self: this\n          }, \"Loading...\");\n          break;\n\n        case \"LOADED\":\n          events = this.state.events.map(function (event) {\n            return console.log(event);\n          });\n          break;\n\n        default:\n          events = React.createElement(\"b\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 53\n            },\n            __self: this\n          }, \"Failed to load data, please try again\");\n          break;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"events\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, events);\n    }\n  }]);\n\n  return Sidebar;\n}(Component);\n\nexport default Sidebar;","map":{"version":3,"sources":["/Users/Matilda/Documents/GitHub/calendar-react/src/Sidebar.js"],"names":["React","Component","AES","enc","Fetcher","Sidebar","props","state","status","events","fetcher","response","JSON","parse","decrypt","toString","then","processResponse","setState","catch","map","event","console","log"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,GAAP,MAAgB,eAAhB;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AACA,OAAOC,OAAP,MAAoB,cAApB;;IAEMC,O;;;;;AACF,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,iFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,MAAM,EAAE,SADC;AAETC,MAAAA,MAAM,EAAE;AAFC,KAAb;AAIA,UAAKC,OAAL,GAAe,IAAIN,OAAJ,EAAf;AANe;AAOlB;;;;oCAEeO,Q,EAAU;AAClB,aAAOC,IAAI,CAACC,KAAL,CAAWX,GAAG,CAACY,OAAJ,CAAYH,QAAZ,EAAsB,gBAAtB,EAAwCI,QAAxC,CAAiDZ,GAAjD,CAAX,CAAP;AAEP;;;wCAEmB;AAAA;;AAChB;AACA;AACA,WAAKO,OAAL,CAAaD,MAAb,CACKO,IADL,CACU,UAAAP,MAAM,EAAI;AACZA,QAAAA,MAAM,GAAG,MAAI,CAACQ,eAAL,CAAqBR,MAArB,EAA6BA,MAAtC;;AACA,QAAA,MAAI,CAACS,QAAL,CAAc;AACVV,UAAAA,MAAM,EAAE,QADE;AAEVC,UAAAA,MAAM,EAAEA;AAFE,SAAd;AAIH,OAPL,EAQKU,KARL,CAQW,YAAM;AACT,QAAA,MAAI,CAACD,QAAL,CAAc;AACVV,UAAAA,MAAM,EAAE;AADE,SAAd;AAGH,OAZL;AAaH;;;6BAEQ;AACL;AACA;AACA,UAAIC,MAAM,GAAG,IAAb;;AACA,cAAQ,KAAKF,KAAL,CAAWC,MAAnB;AACI,aAAK,SAAL;AACIC,UAAAA,MAAM,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAT;AACA;;AACJ,aAAK,QAAL;AACIA,UAAAA,MAAM,GAAG,KAAKF,KAAL,CAAWE,MAAX,CAAkBW,GAAlB,CAAsB,UAAAC,KAAK;AAAA,mBAChCC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CADgC;AAAA,WAA3B,CAAT;AAGA;;AACJ;AACIZ,UAAAA,MAAM,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDAAT;AACA;AAXR;;AAaA,aACI;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKA,MADL,CADJ;AAKH;;;;EAvDiBR,S;;AA0DtB,eAAeI,OAAf","sourcesContent":["import React, { Component } from \"react\";\nimport AES from 'crypto-js/aes'\nimport enc from 'crypto-js/enc-utf8'\nimport Fetcher from \"./fetchfuncs\"\n\nclass Sidebar extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            status: \"LOADING\",\n            events: \"\"\n        };\n        this.fetcher = new Fetcher();\n    }\n\n    processResponse(response) {\n            return JSON.parse(AES.decrypt(response, 'teamengine-key').toString(enc));\n        \n    }\n\n    componentDidMount() {\n        // when data is retrieved we update the state\n        // this will cause the component to re-render\n        this.fetcher.events\n            .then(events => {\n                events = this.processResponse(events).events;\n                this.setState({\n                    status: \"LOADED\",\n                    events: events\n                });\n            })\n            .catch(() => {\n                this.setState({\n                    status: \"ERROR\"\n                });\n            });\n    }\n\n    render() {\n        // depending on the state we either generate\n        // useful message to the user or show the list\n        let events = null;\n        switch (this.state.status) {\n            case \"LOADING\":\n                events = <em>Loading...</em>;\n                break;\n            case \"LOADED\":\n                events = this.state.events.map(event => (\n                    console.log(event)\n                ));\n                break;\n            default:\n                events = <b>Failed to load data, please try again</b>;\n                break;\n        }\n        return (\n            <div className=\"events\">\n                {events}\n            </div>\n        );\n    }\n}\n\nexport default Sidebar;\n"]},"metadata":{},"sourceType":"module"}